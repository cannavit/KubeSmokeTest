version: '3.7'
services:
  smktest-master:
    build:
      context: .
      dockerfile: Dockerfile
    image: smktesting/smoke-master:latest
    container_name: smktest-master
    environment:
      KUBERNETES_TOKEN: YXBpVmVyc2lvbjogdjEKa2luZDogQ29uZmlnCmNsdXN0ZXJzOgotIG5hbWU6ICJ0Z2ktaGV0em5lciIKICBjbHVzdGVyOgogICAgc2VydmVyOiAiaHR0cHM6Ly9vcGVuc2hpZnQudGVjaGdhcC5pdDo4NDQzL2s4cy9jbHVzdGVycy9jLWhwcjV3IgogICAgY2VydGlmaWNhdGUtYXV0aG9yaXR5LWRhdGE6ICJMUzB0TFMxQ1JVZEpUaUJEUlZKVVNVWkpRMEZVUlMwdExTMHRDazFKU1VNM2FrTkRRXAogICAgICBXUmhaMEYzU1VKQlowbENRVVJCVGtKbmEzRm9hMmxIT1hjd1FrRlJjMFpCUkVGdlRWSkpkMFZCV1VSV1VWRkxSWGRzTUdGSFZYUUtZXAogICAgICAyMUdkVmt5WjNoRmFrRlJRbWRPVmtKQlRWUkRWMDVvWkVoU2MxcFRNV3BaVkVGbFJuY3dlRTlVUVRWTmFsbDRUVVJCTkU1RVZtRkdkXAogICAgICB6QjVUMVJCTlFwTmFrMTRUVVJCTkU1RVZtRk5RMmQ0UldwQlVVSm5UbFpDUVc5VVExaFNiMXBUTVhsWlZ6VnFZVVJGVTAxQ1FVZEJNXAogICAgICBWVkZRWGhOU2xreVJqQmtSM2hzQ2t4WFRtaE5TVWxDU1dwQlRrSm5hM0ZvYTJsSE9YY3dRa0ZSUlVaQlFVOURRVkU0UVUxSlNVSkRaXAogICAgICAwdERRVkZGUVc5VFIzTjNaVXBKVVdoMFZuY3dOak1LVmxKbGJqSlVTMGhRTm5sM1RIWTFkek5OTVRaSE56UjJORzlHTjBZMFMyNVdiXAogICAgICAyRmFaVlpTVFd4c1NEQjBiMlZMYTFSQ1lqbFNORVEwVkZwSGJVdE5hQXBFYjFRNU9YUjNNVEJEWnpSRk0xazBaQ3M0U1V0cVVtNHpiXAogICAgICBrYzJTakl5WkVkMVNXZFlTRk53TTFCV1lta3JWRzVpVFZKNGMyVlBkVXQzYVhWdmNWQndDbkZrVFRoMmFGaHZPREJEUmpaR1NGcEZaXAogICAgICBsVk5iVzh5YjNaMmRtSTNhMk56UzFkaVFuUjZaREpoWWxaTE0yRklORlpwZVhkRE9EZHVXa292Y0M5SVVGVUtPV280TmxGcE5FaE9aXAogICAgICAzZHRlVmxpUTNSV1VtZEpVRUZJY0RRelRVaE5MekppYlRKWE5HSTBia1V3V0dkdFR6QnpWSGg1U1hsdmJFSm9SekZWTlRCV05ncHVSXAogICAgICBHVjVRamhwZFVOTWRIZERiV3gxVUV4WVVVVmpkME5pV2twVVQwWnBaa1ZvS3k5TmJGRklka0l2YTBsTmJHWkJlVFJqTlZaS05UVllUXAogICAgICBHWlpTRTQzQ21kTWVYRnZVVWxFUVZGQlFtOTVUWGRKVkVGUFFtZE9Wa2hST0VKQlpqaEZRa0ZOUTBGeFVYZEVkMWxFVmxJd1ZFRlJTXAogICAgICBDOUNRVlYzUVhkRlFpOTZRVTRLUW1kcmNXaHJhVWM1ZHpCQ1FWRnpSa0ZCVDBOQlVVVkJVVWxuWW0wNWVVUm5USE5PTVdselYyOUdWXAogICAgICBVcFlNakZwTWk5V05reENRbEJ0WlU4MlRVTnBWUXAyY2xOTVJUVkRRMUZ5TVZZd01tdDZTRWhMWmtSdlZtRm9SME5MYW5wU2VHVkNaXAogICAgICBVTlRVa3RNU0dwT2VUQkdMMElyV1hwR05XeE5RM2xGYVhaRmVUUlRDalYxYjFSa2FWUkJiR2RUSzNGNE1reDZWRzVaV1RKa1kzY3plXAogICAgICBrZFJZV2hMVDAxVVQwYzRZVEpRVkdkM1ZuZzNTa2RWVGt0V00xQk1Za1JHZUVGb1VHc0tlVWhOWkRGblJXNVRhVVJuTHpoYUwwdEpSXAogICAgICBuZEhSa05HVUhGNmNtOVRUekZqVnpCNlpUZ3JURGgzUzBOM0szTkhPRnB6VlRSQ2RrYzFVVFZ4YzFSWWNRb3dWak5yTTA1clpETkhlXAogICAgICBWUlFTR1JyVkdaRFZGWTRURlZ0VFRGemRuRXpibllyVGpscFN6aGhVa0prY1ZZMlN6RnVOMUJDU1c5VVN6Qm9SWFZTYmxWRkNtRmhiXAogICAgICBYSmFkRWxWVkRSc2JFNURlVFowYjBOcFVuQTBja1Z6SzFGalVITnZPVVEzUVd4cE5VdHVVRlpJUzJjOVBRb3RMUzB0TFVWT1JDQkRSXAogICAgICBWSlVTVVpKUTBGVVJTMHRMUzB0IgotIG5hbWU6ICJ0Z2ktaGV0em5lci1yYW5jaGVyIgogIGNsdXN0ZXI6CiAgICBzZXJ2ZXI6ICJodHRwczovLzUuOS4yMzYuMTc6NjQ0MyIKICAgIGNlcnRpZmljYXRlLWF1dGhvcml0eS1kYXRhOiAiTFMwdExTMUNSVWRKVGlCRFJWSlVTVVpKUTBGVVJTMHRMUzB0Q2sxSlNVTjNha05EUVwKICAgICAgV0Z4WjBGM1NVSkJaMGxDUVVSQlRrSm5hM0ZvYTJsSE9YY3dRa0ZSYzBaQlJFRlRUVkpCZDBSbldVUldVVkZFUlhka2NtUlhTbXdLVFwKICAgICAgRmRPYUUxQ05GaEVWRVUxVFVScmVVNXFSWGROVkVVd1RXeHZXRVJVU1RWTlJHdDVUWHBGZDAxVVJUQk5iRzkzUldwRlVVMUJORWRCTVwKICAgICAgVlZGUVhoTlNBcGhNMVpwV2xNeGFsbFVRME5CVTBsM1JGRlpTa3R2V2tsb2RtTk9RVkZGUWtKUlFVUm5aMFZRUVVSRFEwRlJiME5uWlwKICAgICAgMFZDUVV4V2EzcHBkVU5NZWk5cUNraFVUazh5U1RoeVkzSlpaRWt4ZGpCbmVtNVFTamxNVVRKaU1ERkpaMVYwWkdSVVNVMTJOVEZ0V1wKICAgICAgRTkwZW14MFpGTkplVm96VUdab2FVOW5jM1Z3Y1VvS2JtdDJNVFZMTlVOQ04yNXZlbmxFYVdsc2FtRnRXRVl4TWtwaWMxTkdUMUp1WlwKICAgICAgbEZxYkVjeldYUnJRMU42UVRkTWFrRXpWUzg0TmxwNFFuZDJlRmhtY1FwR1NrRkhPQ3RRY1dSWFJ6QnRSRkYxZFdOcWNGZDRObXRLWVwKICAgICAgMEZaU0ZnNFdEaFhSM2hoUTA1aU4xazFXVE5PYUZoQ1ZUZHNLekJyVVdvNU4yTk1jbU0zQ2pKbWIyeFBjWFJNUVdzNWRXczVSbEZXV1wKICAgICAgVU15Ym5wUVdUQTBkRlpqVkVReU0zQnRheXRqUW1SdVZXTklhV0pzWmtWNFowRm1TREU0TmtwNmJtWjJjVGNLTWtWYU4zTjNOMVozVVwKICAgICAgM00zTWxvMU5sZDNOV05WYkZGMFVtYzBWMnBRYVhOc2RYRlBibE5CVEVOQ1ZUaEdkakJyYmtoRU1rc3JibnAxYWtGaFpsVlJOUW8wT1wKICAgICAgV0ZKTkM5U1UxbHNZME5CZDBWQlFXRk5hazFEUlhkRVoxbEVWbEl3VUVGUlNDOUNRVkZFUVdkTGEwMUJPRWRCTVZWa1JYZEZRaTkzVVwKICAgICAgVVpOUVUxQ0NrRm1PSGRFVVZsS1MyOWFTV2gyWTA1QlVVVk1RbEZCUkdkblJVSkJSVFJJV21oS1JrcFFjbmR4YzNncmJEaFdkMnAzUVwKICAgICAgMjFoZERGeE5FdDVlRkZyVm5FS2FFdG1kSGxxUTFWSVJWQXpUM1ZRVVU1dWJXWldLMkZUVm1SbEwzVnNkMGRKSzFsbFpHZFBZVFp4VlwKICAgICAgRzF4WlU1bmFEUXpPRVo1UzNOMlNsWjVZelkwWlFwQ1RrWTRPRnBzSzNseGFVWnVjRW8yTDBJNFpsVlNkemhSVURVd2JrcGlVMUp1YVwKICAgICAgemd4UlVGdmVrRXlNVGxZUTBjclRIbFROMncwYlU4eE1FNWtjMlZ6Q2s5TFJFNHJUVFJIZEhaTE1IcEpOakZLVEVSemVUaHFTMjlRVFwKICAgICAgV0pETTI5bmVHb3pZMVJMVEc5Wk9FY3dlRkpuWTBod2NETnJOWFZHUVhrNVRUaEpXVW9LTUROVGRqbENSMUo0YzNwUlQxSmxXbnAxY1wKICAgICAgM1JPTDNOUk9XMDJkMEphUTFSUlExUmtWRWM1UVdaTWJWSmpZekE0Y2xCVFRVVnJiV1JQVGxsYVkyaFRSd3A2UVc1b1VFWXplVzlSTFwKICAgICAgMWxMYlROdVQzWkVhbTB2S3pSNVprZDVSVGQzU0hGNlZXUkZibkIxZERoaE1VbDBOV2hCVm1NOUNpMHRMUzB0UlU1RUlFTkZVbFJKUlwKICAgICAga2xEUVZSRkxTMHRMUzBLIgoKdXNlcnM6Ci0gbmFtZTogInUtOXZxNXgiCiAgdXNlcjoKICAgIHRva2VuOiAia3ViZWNvbmZpZy11LTl2cTV4LmMtaHByNXc6d2JuMnZibHRwZmxqOTZyaGcya2Y3Zm1xbThrZnJzbDk0NnJrNGdoMmZ3anhicG10aDhrMmxoIgoKY29udGV4dHM6Ci0gbmFtZTogInRnaS1oZXR6bmVyIgogIGNvbnRleHQ6CiAgICB1c2VyOiAidS05dnE1eCIKICAgIGNsdXN0ZXI6ICJ0Z2ktaGV0em5lciIKLSBuYW1lOiAidGdpLWhldHpuZXItcmFuY2hlciIKICBjb250ZXh0OgogICAgdXNlcjogInUtOXZxNXgiCiAgICBjbHVzdGVyOiAidGdpLWhldHpuZXItcmFuY2hlciIKCmN1cnJlbnQtY29udGV4dDogInRnaS1oZXR6bmVyIgo=

  smktest-pull:
    image: smktesting/smoke-master:latest
    container_name: smktest-pull
    command:
      [
        'create-smktest',
        '--project-name=test',
        '--environment=develop',
        '--context=kubernetes',
        '--namespace=NAMESPACE',
        '--mode-auto=true',
        '--assert-curl=curl www.google.co2m',
      ]

networks:
  host:
